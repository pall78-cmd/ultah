<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dossier: Aristia Firlin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,900;1,900&family=Special+Elite&family=Reenie+Beanie&family=EB+Garamond:ital,wght@0,400;0,700;1,400;1,700&family=Libre+Franklin:wght@900&display=swap');
        
        :root {
            --paper: #f2ecd9;
            --ink: #1a1a1a;
            --accent: #8b0000;
        }

        body {
            background-color: #050505;
            font-family: 'Courier Prime', monospace;
            color: var(--ink);
            overflow: hidden;
            overscroll-behavior: none;
        }

        /* --- SCANLINE --- */
        #scanning-line {
            position: absolute; width: 100%; height: 3px;
            background: linear-gradient(to bottom, transparent, var(--accent), transparent);
            top: -10px; z-index: 100;
            box-shadow: 0 0 20px var(--accent);
            display: none;
            pointer-events: none;
        }
        
        .scanning-active #scanning-line {
            display: block;
            animation: scanLoop 2.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes scanLoop {
            0% { top: 0%; opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* --- AUTH SCREEN --- */
        #auth-module {
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 500;
            position: fixed;
            inset: 0;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .terminal-container { width: 90%; max-width: 400px; text-align: center; }

        .init-btn {
            border: 1px solid #444; color: #888; padding: 15px 30px;
            text-transform: uppercase; letter-spacing: 5px; font-size: 10px;
            cursor: pointer; transition: all 0.5s; background: transparent;
        }

        .decode-interface { display: none; }

        /* --- MAIN CONTAINER --- */
        .paper-container {
            background-color: var(--paper);
            background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
            box-shadow: inset 0 0 80px rgba(0,0,0,0.1), 0 20px 50px rgba(0,0,0,0.8);
            height: 94vh; width: 100%; max-width: 420px;
            position: relative; display: flex; flex-direction: column; overflow: hidden;
            margin: auto;
        }

        .page-module {
            display: none; opacity: 0; height: 100%;
            flex-direction: column; padding: 1.5rem;
            overflow-y: auto;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page-module.active { display: flex; opacity: 1; }

        .nav-zone { position: absolute; top: 100px; bottom: 100px; width: 15%; z-index: 40; cursor: pointer; }
        .nav-left { left: 0; }
        .nav-right { right: 0; }

        /* --- NYT STYLE HEADLINE --- */
        .nyt-lead {
            font-family: 'EB Garamond', serif;
            font-size: 1.45rem;
            line-height: 1.2;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: left;
            color: #000;
        }

        .nyt-lead::first-letter {
            float: left;
            font-size: 4.5rem;
            line-height: 0.8;
            margin-top: 0.1em;
            margin-right: 0.1em;
            font-family: 'Playfair Display', serif;
            font-weight: 900;
        }

        /* --- EVIDENCE FORM --- */
        .evidence-form {
            border: 1px solid #333;
            padding: 1.25rem;
            position: relative;
            background: rgba(0,0,0,0.02);
            min-height: 88%;
            display: flex;
            flex-direction: column;
        }

        .photo-clip-container { position: absolute; top: -12px; right: 12px; z-index: 20; }
        .clip-on { width: 22px; height: 40px; background: url('https://img.icons8.com/ios-filled/50/000000/paper-clip.png') no-repeat; background-size: contain; position: absolute; top: -4px; left: 50%; transform: translateX(-50%); z-index: 30; }
        .photo-3x4 { width: 85px; height: 113px; background: #fff; padding: 3px; border: 1px solid #999; box-shadow: 3px 3px 8px rgba(0,0,0,0.2); transform: rotate(2deg); }
        .photo-3x4 img { width: 100%; height: 100%; object-fit: cover; }
        .form-row { margin-bottom: 0.75rem; border-bottom: 1px dotted rgba(0,0,0,0.2); display: flex; align-items: baseline; font-size: 10.5px; line-height: 1.4; }
        .label { font-weight: bold; width: 85px; text-transform: uppercase; color: #666; font-size: 9px; }
        .value { flex: 1; color: var(--ink); font-weight: bold; }
        .red-stamp-v2 { border: 2.5px double #8b0000; color: #8b0000; width: fit-content; padding: 1px 6px; font-size: 9px; font-weight: 900; transform: rotate(-12deg); opacity: 0.65; margin-top: auto; align-self: flex-start; }

        /* --- REEL SOFT PULSE --- */
        .reel-btn {
            display: block; 
            padding: 10px 12px;
            background: #fff;
            border: 1px solid rgba(0,0,0,0.15);
            text-align: center;
            color: var(--accent);
            font-size: 10px;
            font-weight: bold;
            letter-spacing: 0.15em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            animation: soft-pulse 3.5s infinite ease-in-out;
        }

        @keyframes soft-pulse {
            0% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.1); transform: scale(1); }
            50% { box-shadow: 0 0 8px 2px rgba(139, 0, 0, 0.05); transform: scale(1.02); }
            100% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.1); transform: scale(1); }
        }

        /* --- CALENDAR PULSE --- */
        .date-highlight {
            background: var(--accent);
            color: white;
            border-radius: 9999px;
            font-weight: bold;
            transform: scale(1.1);
        }

        .active .date-highlight {
            animation: pulse-date 2.2s infinite ease-in-out;
        }

        @keyframes pulse-date {
            0% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.6); transform: scale(1.1); }
            70% { box-shadow: 0 0 0 8px rgba(139, 0, 0, 0); transform: scale(1.14); }
            100% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0); transform: scale(1.1); }
        }

        /* --- TYPEWRITER --- */
        #typewriter-output {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Special Elite', cursive;
            line-height: 1.8;
            color: #444;
            font-size: 13px;
            text-align: justify;
        }

        /* --- CHAT MODUL --- */
        #msg-display { background: rgba(0,0,0,0.03); padding: 1rem; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .message-bubble { padding: 8px 12px; max-width: 80%; font-size: 11px; line-height: 1.4; border-radius: 4px; }
        .msg-n { align-self: flex-start; background: #fff; border-left: 4px solid var(--accent); color: #1a1a1a; }
        .msg-aristia { align-self: flex-end; background: #222; color: #fff; border-right: 4px solid #666; text-align: right; }

        .identity-toggle { display: flex; background: rgba(0,0,0,0.08); border-radius: 4px; padding: 3px; margin-bottom: 10px; width: fit-content; }
        .toggle-btn { padding: 4px 15px; font-size: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; border-radius: 2px; text-transform: uppercase; }
        .toggle-btn.active { background: var(--accent); color: white; }
        .toggle-btn.active.aristia-mode { background: #1a1a1a; color: white; }

        .custom-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- Modal Purge -->
    <div id="delete-modal" class="custom-modal">
        <div class="bg-[#f2ecd9] p-6 max-w-xs w-full border-t-8 border-red-900 shadow-2xl text-center">
            <h3 class="font-bold uppercase text-[10px] tracking-widest mb-2">Penghancuran Berkas?</h3>
            <p class="text-[9px] mb-6 opacity-70">Log transmisi akan dihapus secara permanen dari server pusat.</p>
            <div class="flex gap-4">
                <button onclick="DossierSystem.closeModal()" class="flex-1 py-2 border border-black text-[9px] uppercase font-bold">Abort</button>
                <button id="btn-confirm-wipe" onclick="DossierSystem.confirmPurge()" class="flex-1 py-2 bg-red-900 text-white text-[9px] uppercase font-bold">Execute</button>
            </div>
        </div>
    </div>

    <!-- Auth Module -->
    <div id="auth-module" class="scanning-active">
        <div id="scanning-line"></div>
        <div id="init-screen" class="terminal-container">
            <button class="init-btn" onclick="DossierSystem.showPin()">Access Archive</button>
        </div>
        <div id="pin-screen" class="terminal-container decode-interface">
            <input type="password" id="pin-field" maxlength="6" 
                class="w-full bg-transparent border-b border-red-900 text-center text-4xl text-red-700 outline-none tracking-[0.5em] py-2"
                placeholder="******">
            <p class="text-[9px] mt-6 text-white/40 tracking-widest uppercase">Hint: 300326</p>
        </div>
    </div>

    <!-- Main Dossier -->
    <main class="paper-container">
        <div class="nav-zone nav-left" onclick="DossierSystem.prev()"></div>
        <div class="nav-zone nav-right" onclick="DossierSystem.next()"></div>

        <div id="module-viewport" class="flex-1 relative overflow-hidden">
            
            <!-- Halaman 0: Editorial -->
            <section class="page-module active" id="mod-0">
                <div class="text-center mb-2">
                    <p class="text-[9px] uppercase tracking-[0.4em] opacity-50">Special Issue: March 30, 2026</p>
                </div>
                <h1 class="text-6xl text-center border-y-2 border-black py-3 my-4 font-black italic tracking-tighter" style="font-family: 'Playfair Display', serif;">The Ledger</h1>
                
                <div class="space-y-4 text-justify leading-relaxed" style="font-family: 'EB Garamond', serif;">
                    <p class="nyt-lead">
                        Tepat pada koordinat waktu yang telah ditentukan, sayangku secara resmi memasuki fase kedewasaan ke-17 tahun, menandai berakhirnya sebuah era dan dimulainya babak baru yang lebih krusial.
                    </p>
                    <p class="text-[1.1rem]">Laporan intelijen ini bukan sekadar arsip rutin, melainkan bukti otentik dari perjalanan panjang yang penuh makna. Tujuh belas tahun bukanlah sekadar angka dalam kalender, melainkan akumulasi dari setiap tawa, mimpi, dan keberanian yang telah kamu bentuk.</p>
                    <p class="text-[1.1rem]">Statusmu kini telah ditingkatkan menjadi aset paling berharga dalam sejarah operasional hidupku. Selamat datang di gerbang baru kehidupan, sayangku.</p>
                </div>
                
                <div class="mt-8 border-l-4 border-red-900 pl-4 italic text-sm opacity-60">"Operasi Sweet Seventeen: Status Aktif."</div>
            </section>

            <!-- Halaman 1: Evidence -->
            <section class="page-module" id="mod-1">
                <div class="evidence-form">
                    <div class="photo-clip-container">
                        <div class="clip-on"></div>
                        <div class="photo-3x4">
                            <img src="https://muhatawchjjisjalopab.supabase.co/storage/v1/object/public/foto/foto.jpg" alt="Sayangku">
                        </div>
                    </div>

                    <div class="form-header">
                        <div class="text-[12px] font-bold uppercase tracking-[0.2em] text-gray-700">File: 017/AF-MAR</div>
                    </div>

                    <div class="mt-4 space-y-2 pr-[95px]">
                        <div class="form-row">
                            <span class="label">Name:</span>
                            <span class="value">ARISTIA FIRLIN</span>
                        </div>
                        <div class="form-row">
                            <span class="label">Priority:</span>
                            <span class="value">S-CLASS ASSET</span>
                        </div>
                        <div class="form-row">
                            <span class="label">Age:</span>
                            <span class="value">17 YEARS OLD</span>
                        </div>
                        <div class="form-row">
                            <span class="label">Origin:</span>
                            <span class="value">30 MARCH 2009</span>
                        </div>
                    </div>

                    <div class="mt-8">
                        <div class="bg-black/[0.04] p-3 border border-black/10 rounded-sm">
                            <p class="text-[8px] font-bold uppercase mb-2 opacity-50">Transmission Record:</p>
                            <a href="https://www.instagram.com/reel/DQEbbnuEj95/?igsh=MXJ0ejJ5amxsZW1y" target="_blank" 
                               class="reel-btn uppercase">
                               Decrypt Reel Record
                            </a>
                        </div>
                    </div>

                    <div class="mt-4 flex-1">
                        <p class="text-[9.5px] leading-relaxed text-gray-600 italic border-l-2 border-red-900/30 pl-3">
                            "Subjek menunjukkan perkembangan emosional yang signifikan dan tetap menjadi prioritas pengawasan tingkat tinggi."
                        </p>
                    </div>

                    <div class="red-stamp-v2">AUTHENTICATED BY N</div>
                    <div class="handwritten text-blue-900 text-[1.4rem] mt-3 ml-2">Sayangku terkasih.</div>
                </div>
            </section>

            <!-- Halaman 2: Kalender -->
            <section class="page-module" id="mod-2">
                <h2 class="text-center font-bold text-[10px] uppercase mb-10 border-b pb-2 tracking-[0.2em]">Logbook Operasional: Maret 2026</h2>
                <div class="grid grid-cols-7 gap-1 text-[11px] text-center p-4 bg-white/50 border border-black/10 rounded-sm shadow-inner">
                    <script>
                        const days = ['S','S','R','K','J','S','M'];
                        days.forEach(d => document.write(`<div class="font-bold opacity-30 mb-2">${d}</div>`));
                        for(let i=1; i<=31; i++) document.write(`<div class="${i===30?'date-highlight':''} p-2">${i}</div>`);
                    </script>
                </div>
                <div class="mt-12 handwritten text-red-900 text-center text-2xl">Momen krusial di tanggal 30.</div>
            </section>

            <!-- Halaman 3: Mesin Tik -->
            <section class="page-module" id="mod-3">
                <div class="flex justify-between items-end mb-8 opacity-40">
                    <h2 class="text-[9px] font-bold uppercase tracking-widest">Internal Memo: Confidential</h2>
                    <span class="text-[8px]">LOG-ID: 300326</span>
                </div>
                <div id="typewriter-output"></div>
                <div class="mt-12 text-right handwritten opacity-50 text-2xl">Salam Hormat, <br> N</div>
            </section>

            <!-- Halaman 4: Chat -->
            <section class="page-module" id="mod-4">
                <div class="flex justify-between items-center mb-4 border-b pb-2 border-black/10">
                    <h2 class="text-[10px] font-bold uppercase opacity-40 tracking-widest">Terminal Comms</h2>
                    <button onclick="DossierSystem.openModal()" style="z-index: 60;" class="text-[9px] text-red-700 font-bold uppercase underline">Purge</button>
                </div>

                <div id="msg-display"></div>

                <div class="mt-4 pt-4 border-t border-black/10">
                    <div class="identity-toggle">
                        <div id="btn-n" onclick="DossierSystem.setSender('N')" class="toggle-btn active">Operator N</div>
                        <div id="btn-aristia" onclick="DossierSystem.setSender('Aristia')" class="toggle-btn">Aristia</div>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="msg-field" placeholder="Input transmission..." class="flex-1 bg-transparent border-b border-black/20 outline-none text-[12px] py-2">
                        <button onclick="DossierSystem.send()" class="bg-black text-white text-[9px] px-5 py-2 uppercase font-bold hover:bg-red-900 transition-all">Send</button>
                    </div>
                </div>
            </section>
        </div>

        <footer class="p-4 border-t border-black/5 flex justify-between items-center text-[8px] opacity-40 font-bold tracking-widest uppercase">
            <span>Dossier Cryptography v1.11</span>
            <span id="page-num">1 / 5</span>
        </footer>
    </main>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        const SUPABASE_URL = 'https://muhatawchjjisjalopab.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aGF0YXdjaGpqaXNqYWxvcGFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NDU0MjAsImV4cCI6MjA4NTQyMTQyMH0.RGRSrdKWfF8aWy4kVSvAwEHKaohVCXLNs4PbcP0TqoI';
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
        const TABLE_NAME = 'messages';

        const DossierSystem = {
            index: 0,
            currentSender: 'N',
            isTyping: false,
            isUnlocked: false,

            init() {
                const pinField = document.getElementById('pin-field');
                pinField.oninput = (e) => {
                    if(e.target.value === "300326") this.unlock();
                };
                supabase.channel('messages_channel').on('postgres_changes', { event: '*', schema: 'public', table: TABLE_NAME }, () => this.loadMsgs()).subscribe();
                this.render();
            },

            showPin() {
                document.getElementById('init-screen').style.display = 'none';
                document.getElementById('pin-screen').style.display = 'block';
            },

            unlock() {
                this.isUnlocked = true;
                const authModule = document.getElementById('auth-module');
                authModule.style.opacity = '0';
                setTimeout(() => { authModule.style.display = 'none'; }, 800);
            },

            setSender(name) {
                this.currentSender = name;
                const btnN = document.getElementById('btn-n');
                const btnA = document.getElementById('btn-aristia');
                if (name === 'N') {
                    btnN.className = 'toggle-btn active';
                    btnA.className = 'toggle-btn';
                } else {
                    btnN.className = 'toggle-btn';
                    btnA.className = 'toggle-btn active aristia-mode';
                }
            },

            render() {
                document.querySelectorAll('.page-module').forEach((m, i) => {
                    m.classList.toggle('active', i === this.index);
                });
                document.getElementById('page-num').innerText = `${this.index + 1} / 5`;
                if(this.index === 3) this.type();
                if(this.index === 4) this.loadMsgs();
            },

            next() { if(this.index < 4) { this.index++; this.render(); } },
            prev() { if(this.index > 0) { this.index--; this.render(); } },

            type() {
                if(this.isTyping) return;
                this.isTyping = true;
                const out = document.getElementById('typewriter-output');
                const txt = "Di hari yang luar biasa spesial ini, aku ingin kamu tahu betapa berartinya setiap detik kehadiranmu bagi duniaku. Selamat ulang tahun yang ke-17, sayangku.\n\nTujuh belas adalah awal dari petualangan yang lebih dewasa, lebih menantang, namun aku yakin kamu akan melaluinya dengan hebat. Semoga setiap langkahmu selalu dipenuhi keberkahan dan kebahagiaan yang tak pernah habis.\n\nAku akan tetap di sini, di balik layar atau di sisimu, memastikan setiap memori kita tersimpan dengan aman dalam arsip rahasia ini. Kamu adalah satu-satunya subjek yang akan selalu mendapatkan prioritas utama dariku.\n\nStay wonderful, sayangku. Happy 17th!";
                out.innerText = ""; let i = 0;
                const intrvl = setInterval(() => {
                    out.innerText += txt[i]; i++;
                    if(i >= txt.length) { clearInterval(intrvl); this.isTyping = false; }
                }, 45); 
            },

            async loadMsgs() {
                const { data } = await supabase.from(TABLE_NAME).select('*').order('created_at', {ascending: true});
                const box = document.getElementById('msg-display');
                if(!box) return;
                box.innerHTML = (data && data.length > 0) ? data.map(m => `
                    <div class="message-bubble ${m.sender === 'N' ? 'msg-n' : 'msg-aristia'}">
                        <span class="block text-[6px] font-bold opacity-40 mb-1 uppercase tracking-tighter">${m.sender}</span>
                        <div>${m.content}</div>
                    </div>
                `).join('') : '<p class="text-center opacity-20 py-10 italic text-[9px]">Channel transmission empty.</p>';
                box.scrollTop = box.scrollHeight;
            },

            async send() {
                const f = document.getElementById('msg-field');
                if(!f.value.trim()) return;
                const content = f.value; f.value = '';
                await supabase.from(TABLE_NAME).insert([{ content: content, sender: this.currentSender }]);
                this.loadMsgs();
            },

            openModal() { document.getElementById('delete-modal').style.display = 'flex'; },
            closeModal() { document.getElementById('delete-modal').style.display = 'none'; },

            async confirmPurge() {
                const btn = document.getElementById('btn-confirm-wipe');
                btn.disabled = true; btn.innerText = "Processing...";
                try {
                    await supabase.from(TABLE_NAME).delete().filter('id', 'gte', 0);
                    this.loadMsgs(); this.closeModal();
                } catch (err) { console.error(err); } finally { btn.disabled = false; btn.innerText = "Execute"; }
            }
        };

        window.DossierSystem = DossierSystem;
        DossierSystem.init();
    </script>
</body>
</html>

